"use strict";(self["webpackChunkdoctor_bot"]=self["webpackChunkdoctor_bot"]||[]).push([[611],{7611:function(A,e,s){s.r(e),s.d(e,{default:function(){return z}});var t=s(6768),a=s(4232),g=s(5130);const o=A=>((0,t.Qi)("data-v-43a1b4f4"),A=A(),(0,t.jt)(),A),B={class:"chat-history"},l=o((()=>(0,t.Lk)("h3",null,"Chat History",-1))),i=["onClick"],C={class:"menu-footer"},c={class:"user-info"},n={class:"user-avatar"},Q={class:"user-name"},u={class:"settings-container"},h={key:0,class:"settings-popup"},E=o((()=>(0,t.Lk)("div",{class:"popup-arrow"},null,-1))),I=o((()=>(0,t.Lk)("li",null,[(0,t.Lk)("button",null,"Help & Support")],-1))),r={class:"header"},w={class:"header-left"},D=o((()=>(0,t.Lk)("div",{class:"header-center"},[(0,t.Lk)("h2",null,"[의상현] DoctorChat")],-1))),d=o((()=>(0,t.Lk)("div",{class:"header-right"},null,-1))),k={class:"chat-window"},M={key:0,class:"start-chat"},v={class:"start-chat-content"},H=o((()=>(0,t.Lk)("div",{class:"circle"},null,-1))),F=o((()=>(0,t.Lk)("p",null,"Hello! Nice to see you here!",-1))),G=o((()=>(0,t.Lk)("p",null,'Please press the "Start chat" button to begin.',-1))),O={key:1,class:"chat-messages",ref:"chatMessages"},L={key:0,class:"message-icon"},R={class:"message-name"},p={key:1,class:"message-time"},Y={key:0,class:"message bot"},K={class:"message-content loading"},S=["src"],m={key:0,class:"input-container"},y=["disabled"],U=["disabled"],j=o((()=>(0,t.Lk)("footer",{class:"footer"},[(0,t.Lk)("div",null,"DoctorChatbot V1.")],-1)));function x(A,e,o,x,N,b){const J=(0,t.g2)("font-awesome-icon");return(0,t.uX)(),(0,t.CE)("div",{class:"chatbot-container",onClick:e[11]||(e[11]=(...A)=>x.closeMenuOnOutsideClick&&x.closeMenuOnOutsideClick(...A))},[(0,t.Lk)("div",{class:(0,a.C4)(["overlay-menu",{active:x.isMenuOpen}]),onClick:e[5]||(e[5]=(0,g.D$)((()=>{}),["stop"]))},[(0,t.Lk)("button",{class:"close-menu",onClick:e[0]||(e[0]=(...A)=>x.toggleMenu&&x.toggleMenu(...A))},"X"),(0,t.Lk)("button",{class:"new-chat-button",onClick:e[1]||(e[1]=(...A)=>x.startNewChat&&x.startNewChat(...A))},"New Chat"),(0,t.Lk)("div",B,[l,(0,t.Lk)("ul",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(x.chatHistory,(A=>((0,t.uX)(),(0,t.CE)("li",{key:A._id,onClick:e=>x.loadChat(A),class:"chat-history-item"},(0,a.v_)(x.formatChatHistory(A)),9,i)))),128))])]),(0,t.Lk)("div",C,[(0,t.Lk)("div",c,[(0,t.Lk)("div",n,(0,a.v_)(x.userInitials),1),(0,t.Lk)("div",Q,(0,a.v_)(x.userName),1)]),(0,t.Lk)("div",u,[(0,t.Lk)("button",{class:"settings-button",onClick:e[2]||(e[2]=(...A)=>x.toggleSettingsMenu&&x.toggleSettingsMenu(...A))},[(0,t.bF)(J,{icon:"cog"})]),x.isSettingsMenuOpen?((0,t.uX)(),(0,t.CE)("div",h,[E,(0,t.Lk)("ul",null,[(0,t.Lk)("li",null,[(0,t.Lk)("button",{onClick:e[3]||(e[3]=(...A)=>x.goToAccountSettings&&x.goToAccountSettings(...A))},"Account Settings")]),I,(0,t.Lk)("li",null,[(0,t.Lk)("button",{onClick:e[4]||(e[4]=(...A)=>x.logout&&x.logout(...A))},"Logout")])])])):(0,t.Q3)("",!0)])])],2),(0,t.Lk)("div",r,[(0,t.Lk)("div",w,[(0,t.Lk)("button",{class:"menu-button",onClick:e[6]||(e[6]=(...A)=>x.toggleMenu&&x.toggleMenu(...A))},[(0,t.bF)(J,{icon:"bars"})])]),D,d]),(0,t.Lk)("div",k,[x.currentChat?((0,t.uX)(),(0,t.CE)("div",O,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(x.currentChat.chat_list,(A=>((0,t.uX)(),(0,t.CE)("div",{key:A.date,class:"message_container"},[(0,t.Lk)("div",{class:(0,a.C4)(["message-header",A.sender])},["bot"===A.sender?((0,t.uX)(),(0,t.CE)("span",L)):(0,t.Q3)("",!0),(0,t.Lk)("span",R,(0,a.v_)("user"===A.sender?x.userName:"DoctorBot"),1),"user"===A.sender?((0,t.uX)(),(0,t.CE)("span",p,(0,a.v_)(x.formatTime(A.date)),1)):(0,t.Q3)("",!0)],2),(0,t.Lk)("div",{class:(0,a.C4)(["message",A.sender])},(0,a.v_)(A.message),3)])))),128)),x.isLoading?((0,t.uX)(),(0,t.CE)("div",Y,[(0,t.Lk)("div",K,[(0,t.Lk)("img",{src:s(1833),alt:"Loading"},null,8,S)])])):(0,t.Q3)("",!0)],512)):((0,t.uX)(),(0,t.CE)("div",M,[(0,t.Lk)("div",v,[H,F,G,(0,t.Lk)("button",{onClick:e[7]||(e[7]=(...A)=>x.startNewChat&&x.startNewChat(...A)),class:"start-chat-button"},"Start chat")])]))]),x.currentChat?((0,t.uX)(),(0,t.CE)("div",m,[(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=A=>x.newMessage=A),onKeyup:e[9]||(e[9]=(0,g.jR)(((...A)=>x.sendMessage&&x.sendMessage(...A)),["enter"])),placeholder:"Write a message",disabled:x.isLoading},null,40,y),[[g.Jo,x.newMessage]]),(0,t.Lk)("button",{onClick:e[10]||(e[10]=(...A)=>x.sendMessage&&x.sendMessage(...A)),class:"btn-send",disabled:x.isLoading},[(0,t.bF)(J,{icon:"paper-plane"})],8,U)])):(0,t.Q3)("",!0),j])}s(4114);var N=s(144),b=s(1387),J=s(1394),f=s(5860),P=s(4373),T=s(8950),V=s(2353),W=s(5818);T.Yv.add(V.ckx,V.WMI,V.isI,V.dB);var X={setup(){const A=(0,b.rd)(),e=(0,N.KR)(!1),s=(0,N.KR)(!1),a=(0,N.KR)(""),g=(0,N.KR)(""),o=(0,N.KR)(!1),B=(0,N.KR)(!1),l=(0,N.KR)(null),i=(0,N.KR)([]),C=(0,N.KR)(""),c=(0,N.KR)(!1),n=(0,N.KR)(null),Q=(0,t.EW)((()=>a.value.charAt(0).toUpperCase()||""));let u;(0,t.sV)((()=>{u=(0,f.hg)(J.j,(async e=>{if(e){c.value=!0,a.value=e.displayName||"User",g.value=e.email;try{const s=await P.A.get(`${W.A.apiBaseUrl}/api/check-license`,{params:{email:e.email}});s.data.license_number?await k():A.push("/account-settings")}catch(s){console.error("Error checking license:",s)}}else c.value=!1,A.push("/login")}))})),(0,t.hi)((()=>{u&&u()}));const h=()=>{o.value=!o.value,o.value&&k()},E=A=>{!o.value||A.target.closest(".overlay-menu")||A.target.closest(".menu-button")||(o.value=!1)},I=()=>{A.push("/account-settings"),B.value=!1,o.value=!1},r=()=>{B.value=!B.value},w=async()=>{if(!c.value||""===C.value.trim()||s.value)return;n.value||(n.value=(new Date).toISOString());const A={sender:"user",date:(new Date).toISOString(),message:C.value.trim()};l.value||(l.value={chat_list:[]}),l.value.chat_list.push(A),C.value="",s.value=!0,H();try{const e=await P.A.post("https://asia-northeast3-profound-keel-395608.cloudfunctions.net/gpt-doctor-v1",{message_user:A.message,session_id:g.value}),t={sender:"bot",date:(new Date).toISOString(),message:e.data.message_asst};s.value=!1,l.value.chat_list.push(t),await D(A,t)}catch(e){s.value=!1,console.error(e);const t={sender:"bot",date:(new Date).toISOString(),message:"응답 처리 중 오류가 발생했습니다. 다시 시도해주세요."};l.value.chat_list.push(t);const a={sender:"bot",date:(new Date).toISOString(),message:e};await D(A,a)}finally{H()}},D=async(A,e)=>{try{await P.A.put(`${W.A.apiBaseUrl}/api/update-chat`,{email:g.value,chat_date:n.value,chat_list:[A,e]})}catch(s){console.error("Error saving chat to server:",s)}},d=()=>{c.value?(l.value={chat_list:[]},n.value=null,o.value=!1,H()):A.push("/login")},k=async()=>{if(c.value)try{s.value=!0;const A=await P.A.get(`${W.A.apiBaseUrl}/api/chat-history`,{params:{email:g.value}});i.value=A.data}catch(A){console.error("Error loading chat history:",A)}finally{s.value=!1}},M=A=>{console.log(A),n.value=A.chat_date,l.value=A,e.value=!0,o.value=!1,H()},v=async()=>{try{await J.j.signOut(),c.value=!1,a.value="",g.value="",B.value=!1,e.value=!1,l.value=null,A.push("/login")}catch(s){console.error("Logout error:",s)}},H=()=>{(0,t.dY)((()=>{const A=document.querySelector(".chat-messages");A&&(A.scrollTop=A.scrollHeight)}))},F=A=>{const e=A.chat_list[0]?.message||"No messages";return`${new Date(A.chat_date).toLocaleDateString()} - ${e.substring(0,30)}...`},G=A=>new Date(A).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return{isChatStarted:e,isLoading:s,userName:a,userEmail:g,isMenuOpen:o,isSettingsMenuOpen:B,currentChat:l,chatHistory:i,newMessage:C,isAuthenticated:c,userInitials:Q,toggleMenu:h,toggleSettingsMenu:r,startNewChat:d,sendMessage:w,loadChatHistory:k,formatChatHistory:F,loadChat:M,logout:v,scrollToBottom:H,closeMenuOnOutsideClick:E,goToAccountSettings:I,formatTime:G}}},_=s(1241);const Z=(0,_.A)(X,[["render",x],["__scopeId","data-v-43a1b4f4"]]);var z=Z},1833:function(A){A.exports="data:image/gif;base64,R0lGODlhGAAYAPcBAAAAAAD/AAEBAQICAgMDAwQEBAgICAoKCgsLCwwMDBAQEBISEhUVFR4eHiEhISIiIiMjIyUlJSgoKCkpKSsrKzExMTg4ODw8PENDQ0REREdHR1FRUVNTU2FhYXR0dHl5eXp6eoCAgIGBgYiIiJOTk5SUlJ2dnaysrK+vr7CwsLq6ur+/v8DAwMLCwsrKytDQ0NHR0dXV1dbW1t3d3eHh4ePj4+Tk5Ojo6Orq6vX19ff39/z8/P7+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////yH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBAABACwAAAAAGAAYAIcAAAAA/wABAQECAgIDAwMEBAQICAgKCgoLCwsMDAwQEBASEhIVFRUeHh4hISEiIiIjIyMlJSUoKCgpKSkrKysxMTE4ODg8PDxDQ0NERERHR0dRUVFTU1NhYWF0dHR5eXl6enqAgICBgYGIiIiTk5OUlJSdnZ2srKyvr6+wsLC6urq/v7/AwMDCwsLKysrQ0NDR0dHV1dXW1tbd3d3h4eHj4+Pk5OTo6Ojq6ur19fX39/f8/Pz+/v7///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8IuAB39BBIcKDBgggNGuSxsKFAhg8XJpx4sKLAHhAxOtQYsSPFjxZ7bMxIciTIkwpLduTIEiJKlD1ydDBgoEMOhjJp2sQ5s+bNHR0ADABAoMPAoEOLHhVK1GgPAwAACABgQCBUqVStRp1adccBokILDPxKIOxYsAPE9ugwNWoHhmyjAni7tu1cHjt0dDhQwOZAvXz95t3bN4dIlS1HDnwZsqDilYjxNp6cMDHkx4xBPrbcMvNkzpEdBgQAIfkEBQQAAQAsEQAIAAYABwAACCgAA+h40YJH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"}}]);
//# sourceMappingURL=611.dda68b2e.js.map