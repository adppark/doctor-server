{"version":3,"file":"js/294.d339466c.js","mappings":"0IAGA,MAAMA,EAAMC,EAAAA,EAAMC,OAAO,CACvBC,QAASC,EAAAA,EAAOC,aAGlB,K,iJCNOC,MAAM,a,GACJA,MAAM,mB,UACTC,EAAAA,EAAAA,IAAuD,OAAlDD,MAAM,gBAAc,EAACC,EAAAA,EAAAA,IAAuB,UAAnB,oBAAc,K,UAC5CA,EAAAA,EAAAA,IAAyC,OAApCD,MAAM,aAAY,gBAAY,K,UACnCC,EAAAA,EAAAA,IAAgE,OAA3DD,MAAM,QAAO,4CAAwC,K,UAC1DC,EAAAA,EAAAA,IAAuC,OAAlCD,MAAM,uBAAqB,W,EANtC,Q,GAQWA,MAAM,e,UAIfC,EAAAA,EAAAA,IAES,UAFDD,MAAM,UAAQ,EACpBC,EAAAA,EAAAA,IAA4B,WAAvB,uBAAiB,K,0CAb1BC,EAAAA,EAAAA,IAAAC,EAAAA,GAAA,OACEF,EAAAA,EAAAA,IASM,MATNG,EASM,EARJH,EAAAA,EAAAA,IAOM,MAPNI,EAOM,CANJC,EACAC,EACAC,EACAC,GACAR,EAAAA,EAAAA,IAAkI,UAAzHS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAC,kBAAAD,EAAAC,oBAAAF,K,EAAkBX,EAAAA,EAAAA,IAAoE,OAA9Dc,IAAKC,EAAQ,MAA6BC,IAAI,e,OAP5FC,IAAAC,EAAAA,EAAAA,IAO4G,0BACtGlB,EAAAA,EAAAA,IAAmH,MAAnHmB,EAAmH,EARzHD,EAAAA,EAAAA,IAQ+B,4BAAuBlB,EAAAA,EAAAA,IAA6D,QAAtDS,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAQ,YAAAR,EAAAQ,cAAAT,IAAYZ,MAAM,gBAAe,iBAInGsB,GAES,G,6DAUX,GACEC,KAAAA,GACE,MAAMC,GAASC,EAAAA,EAAAA,MACTC,GAAkBC,EAAAA,EAAAA,KAAI,IAE5BC,EAAAA,EAAAA,KAAU,KACR,MAAMC,GAAcC,EAAAA,EAAAA,IAAmBC,EAAAA,GAAMC,UAC3C,GAAIC,EAAM,CACRP,EAAgBQ,OAAQ,EACxB,IAEE,MAAMC,QAA0BzC,EAAAA,EAAI0C,IAAI,sBAAuB,CAAEC,OAAQ,CAAEC,MAAOL,EAAKK,SAElFH,EAAkBI,KAAKN,YAEpBvC,EAAAA,EAAI8C,KAAK,wBAAyB,CACtCF,MAAOL,EAAKK,MACZG,UAAWR,EAAKS,YAChBC,eAAgB,KAKpB,MAAMC,QAA6BlD,EAAAA,EAAI0C,IAAI,qBAAsB,CAAEC,OAAQ,CAAEC,MAAOL,EAAKK,SAErFM,EAAqBL,KAAKI,eAC5BnB,EAAOqB,KAAK,YAEZrB,EAAOqB,KAAK,oBAEhB,CAAE,MAAOC,GACPC,QAAQD,MAAM,8BAA+BA,GAC7CtB,EAAOqB,KAAK,oBACd,CACF,MACEnB,EAAgBQ,OAAQ,CAC1B,IAIF,MAAO,IAAML,GAAa,IAG5B,MAAMf,EAAmBkB,UACvB,MAAMgB,EAAW,IAAIC,EAAAA,GACrB,UACQC,EAAAA,EAAAA,IAAgBnB,EAAAA,EAAMiB,EAE9B,CAAE,MAAOF,GACPC,QAAQD,MAAM,wBAAyBA,EACzC,GAGIzB,EAAaA,KACjBG,EAAOqB,KAAK,UAAU,EAGxB,MAAO,CACL/B,mBACAO,aACAK,kBAEJ,G,UC/EF,MAAMyB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://doctor_bot/./src/utils/api.js","webpack://doctor_bot/./src/views/LoginPage.vue","webpack://doctor_bot/./src/views/LoginPage.vue?fce3"],"sourcesContent":["import axios from 'axios';\nimport config from '@/config/config';\n\nconst api = axios.create({\n  baseURL: config.apiBaseUrl,\n});\n\nexport default api;","<template>\n  <div class=\"loginpage\">\n    <div class=\"login-container\">\n      <div class=\"header-title\"><h1>의상현 DoctorChat</h1></div>\n      <div class=\"sub-title\">Welcome Back</div>\n      <div class=\"desc\">Create an account a start messaging now!</div>\n      <div class=\"space-before-button\"></div>\n      <button @click=\"signInWithGoogle\"><img :src=\"require('@/assets/google-logo.svg')\" alt=\"google-logo\" />Sign In with Google</button>\n      <div class=\"signup-desc\">Don’t have an account? <span @click=\"goToSignUp\" class=\"sign-up-text\">Sign Up</span></div>\n    </div>\n  </div>\n\n  <footer class=\"footer\">\n    <div>DoctorChatbot V1.</div>\n  </footer>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router';\nimport { signInWithPopup, GoogleAuthProvider, onAuthStateChanged } from 'firebase/auth';\nimport { auth } from '@/firebase';\nimport { ref, onMounted } from 'vue';\nimport api from '@/utils/api';\n\nexport default {\n  setup() {\n    const router = useRouter();\n    const isAuthenticated = ref(false);\n\n    onMounted(() => {\n      const unsubscribe = onAuthStateChanged(auth, async (user) => {\n        if (user) {\n          isAuthenticated.value = true;\n          try {\n            // Check if user is registered\n            const checkUserResponse = await api.get('/api/check-userinfo', { params: { email: user.email } });\n            \n            if (!checkUserResponse.data.user) {\n              // If user is not registered, register them\n              await api.post('/api/regist_user_info', {\n                email: user.email,\n                user_name: user.displayName,\n                license_number: ''\n              });\n            }\n\n            // Check if user has a license\n            const checkLicenseResponse = await api.get('/api/check-license', { params: { email: user.email } });\n            \n            if (checkLicenseResponse.data.license_number) {\n              router.push('/chatbot');\n            } else {\n              router.push('/account-settings');\n            }\n          } catch (error) {\n            console.error('Error during login process:', error);\n            router.push('/account-settings');\n          }\n        } else {\n          isAuthenticated.value = false;\n        }\n      });\n\n      // Cleanup the listener on component unmount\n      return () => unsubscribe();\n    });\n\n    const signInWithGoogle = async () => {\n      const provider = new GoogleAuthProvider();\n      try {\n        await signInWithPopup(auth, provider);\n        // The router push and user checks are handled by onAuthStateChanged\n      } catch (error) {\n        console.error('Error during sign in:', error);\n      }\n    };\n\n    const goToSignUp = () => {\n      router.push('/signup');\n    };\n\n    return {\n      signInWithGoogle,\n      goToSignUp,\n      isAuthenticated\n    };\n  },\n};\n</script>\n\n<style scoped>\n\n.loginpage{\n  display: flex;\n  width: 100%;\n  justify-content: center;\n}\n\n.login-container {\n  display: flex;\n  flex-direction: column;\n  height: 90vh;\n  width:80%;\n  background: #FFFFFF;\n  color: #667085;\n}\n\n.header-title {\n  margin-top: 50px;\n  font-weight: 900;\n}\n\n.sub-title {\n  font-weight: 700;\n  font-size: 20px;\n}\n.desc {\n  font-weight: 300;\n  margin-top: 10px;\n}\n.signup-desc {\n  font-weight: 300;\n  margin-top: 10px;\n  font-size: 14px;\n}\n.space-before-button{\n  height: 10vh;\n}\n.sign-up-text {\n  font-weight: 500;\n}\n\nbutton {\n  display:flex;\n  align-items: center;\n  justify-content: center;\n  background: #ffffff;\n  color: #959697;\n  border: none;\n  padding: 10px 15px;\n  margin-top: 20px;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n  border: #e7e7e7 1px solid;\n  justify-content: center;\n  max-width: 300px;\n}\nbutton img {\n  margin-right: 8px;\n}\n\nbutton:hover {\n  background: #357ae8;\n  color: white;\n}\n\nspan {\n  color: #4285F4;\n  cursor: pointer;\n}\n\n.footer {\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  padding: 8px;\n  text-align: center;\n  border-top: 1px solid #E3E3E3;\n  color: #667085;\n}\n</style>\n","import { render } from \"./LoginPage.vue?vue&type=template&id=0be15e4e&scoped=true\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js\"\n\nimport \"./LoginPage.vue?vue&type=style&index=0&id=0be15e4e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0be15e4e\"]])\n\nexport default __exports__"],"names":["api","axios","create","baseURL","config","apiBaseUrl","class","_createElementVNode","_createElementBlock","_Fragment","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","onClick","_cache","args","$setup","signInWithGoogle","src","require","alt","_hoisted_7","_createTextVNode","_hoisted_8","goToSignUp","_hoisted_9","setup","router","useRouter","isAuthenticated","ref","onMounted","unsubscribe","onAuthStateChanged","auth","async","user","value","checkUserResponse","get","params","email","data","post","user_name","displayName","license_number","checkLicenseResponse","push","error","console","provider","GoogleAuthProvider","signInWithPopup","__exports__","render"],"sourceRoot":""}